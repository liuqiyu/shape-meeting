<template>
  <div class="asp-research-replydetail"
       :class="'is_' + position">
    <el-collapse v-model="activeNames">
      <el-collapse-item :name="'1'">
        <template slot="title">
          <span class="title"
                :style="{
              'color': 'rgb(48,49,51,1)',
              'font-size': '15px'
            }">
            <i class="el-icon-tickets"
                style="margin-right: 5px"></i>调研问题
          </span>
        </template>
        <template v-for="(item, index) in model[problemItem.problemTableName]">
          <el-collapse v-model="getActiveNames" :key="index" style="margin-bottom: 10px;">
            <el-collapse-item :name="index">
              <template slot="title">
                <span class="title"
                      :style="{
                    'color': 'rgb(48,49,51,1)',
                    'font-size': '15px'
                  }">
                  <i class="el-icon-tickets"
                      style="margin-right: 5px"></i>调研问题{{ index + 1 }}：{{ item[problemItem.problemName] }} ({{ item[problemItem.problemTypeDescName] }})
                </span>
              </template>
              <aspResearchIconDetail :model="model" :problemItem="problemItem" :problemTableData="item"></aspResearchIconDetail>
            </el-collapse-item>
          </el-collapse>
        </template>
      </el-collapse-item>
    </el-collapse>
  </div>
</template>

<script>
import aspResearchIconDetail from '../../asp-research-icondetail'
export default {
  name: 'asp-research-replydetail',
  components: {
    aspResearchIconDetail
  },
  computed: {
    getActiveNames () {
      return this.collapseGroup.map((item, index) => {
        return index
      })
    }
  },
  props: {
    problemItem: {
      type: Object,
      default: () => {}
    },
    model: {
      type: Object,
      default: () => {}
    },
    position: {
      type: String,
      default: () => 'left'
    }
  },
  data () {
    return {
      activeNames: ['1'],
      collapseGroup: this.model.collapseGroup,
      showProduct: false,
      replyWayOptionList: [
        {
          label: '多选',
          value: '1'
        },
        {
          label: '单选',
          value: '2'
        },
        {
          label: '布尔值(是/否)',
          value: '3'
        },
        {
          label: '开放式',
          value: '4'
        }
      ]
    }
  },
  created () {
    // console.log('model======', this.model)
  },
  methods: {
    getConvertName (code, list) {
      for (let i = 0; i < list.length; i++) {
        if (list[i].value === code) {
          return list[i].label
        } else {
          return ''
        }
      }
    }
  }
}
</script>